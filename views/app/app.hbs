<div class="row justify-content-center">

    <div class="col-md-6">
        <h2>Create new food log</h2>

        <form action="/registry/new" method="POST">
            {{!-- <a href="/registry/new" class="btn btn-dark btn-block btn-lg">Create new log</a> --}}
            <div class="form-group">
                <label for="date">Date</label>
                <input type="date" id="date" name="date">
            </div>

            <div type="hidden" class="form-group">
                <label for="owner"></label>
                <p value="{{user._id}}">{{name}}</p>
            </div>
            <button type="submit" class="btn btn-outline-success">Create log</button>
        </form>
    </div>


    {{!-- EL REGISTRO --}}

    <div class="col-md-6">

        <h2>Select an existing log</h2>
        <div class="form-group">
            <form action="/app/registry" method="get">
                <label for="registries">Registries:</label>
                <select name="registry" class="mdb-select md-form" id="registries-list">
                    <option>Select</option>

                    {{#each registries}}
                    <option value="{{_id}}">{{date}}</option>
                    {{/each}}
                </select>
                <button type="submit">Select</button>
            </form>
        </div>


        {{#if registry}}

        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col"></th>
                    <th scope="col">Item</th>
                    <th scope="col">Name</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Serving</th>
                    <th scope="col">Kcal</th>
                    <th scope="col">Total</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">1</th>
                    <td>{{registry.meals.image}}</td>
                    <td>{{registry.meals.name}}</td>
                    <td>{{registry.meals.amount_gr}}</td>
                    <td>{{registry.meals.kcal}}</td>
                </tr>

            </tbody>
        </table>

        <pre>{{registry}}</pre>

        {{/if}}

    </div>


    <div class="col-md-6">
        <h2>Search new item</h2>
        <form action="/app/registry?registry={{registry._id}}" method="GET" class="form-inline my-2 my-lg-0">
            {{#if registry}}
            <input type="hidden" name="registry" value="{{registry._id}}">
            {{/if}}
            <input class="active-cyan-3 active-cyan-4 mb-4" type="search" name="searchTerm" placeholder="Search"
                aria-label="Search">
            {{!-- <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button> --}}
        </form>
    </div>

    {{!-- cuidado aqui --}}
    {{#if meal}}
    <div class="col-md-6">

        <table class="table table-bordered table-search">
            <tr class="meal">
                <tbody>
                    <tr>
                        <td class="picture">
                            <img class='img-search' src="{{meal.photo.thumb}}" />
                        </td>

                        <td class="name">
                            {{meal.food_name}}
                        </td>

                        <td id="mealWeight">
                            <input type="number" class="kcalbar" onchange="onMealWeightChange()"
                                value="{{meal.serving_weight_grams}}" min="0"
                                placeholder="{{meal.serving_weight_grams}}">
                            <span>gr</span>
                        </td>

                        <td type="hidden" class="serving">
                            Serving: <span>{{meal.serving_weight_grams}}</span> gr
                        </td>

                        <td type="hidden" class="calories">
                            Kcal: <span>{{meal.nf_calories}}</span> kcal
                        </td>

                        <td class="totalCalories">
                            Total: <span>{{meal.nf_calories}}</span> kcal
                        </td>
                    </tr>
                </tbody>
            </tr>
        </table>
    </div>

    {{!-- ADD MEALS TO REGISTRY --}}
    <div class="col-md-6">
        <form action="/app/registry" method="post">
            <input type="hidden" name="registryId" value="{{registry._id}}">
            <input type="hidden" name="name" value="{{meal.food_name}}">
            <input type="hidden" id="amount_gr" name="amount_gr" value="">
            <input type="hidden" id="kcal" name="kcal" value="">
            <input type="hidden" name="image" value="{{meal.photo.thumb}}">
            <button type="submit" id='mealsListButton' class="btn btn-outline-success my-2 my-sm-0">Add this item to
                log</button>
        </form>
    </div>

    {{/if}}

    {{!-- CONTAINERS PARA CLONAR Y PINTAR LISTA DE MEALS NUEVOS --}}

    <div class="col-md-6">
        <div class="mealContainer">
            <div class='mealList'>
                {{!-- <p>{{photo.thumb}}, {{food_name}}, {{serving_weight_grams}}, {{nf_calories}} </p> --}}
            </div>
        </div>
    </div>

</div>
<script src="/javascripts/calculator.js"></script>
<script src="/javascripts/mealsList.js"></script>